{"version":3,"sources":["app-directives/default-template-directive.js"],"names":[],"mappings":"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","file":"app-directives/default-template-directive.js","sourcesContent":["(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name enterprise.directive:defaultTemplate\n   * @restrict EA\n   * @element\n   *\n   * @description\n   *\n   * @example\n     <example module=\"enterprise\">\n       <file name=\"index.html\">\n        <default-template></default-template>\n       </file>\n     </example>\n   *\n   */\n  angular\n    .module('enterprise')\n    .directive('defaultTemplate', defaultTemplate);\n\n  function defaultTemplate() {\n    return {\n\n      restrict: 'EA',\n\n      scope: {\n\n        design: '@',\n\n        options: '='\n\n      },\n\n      templateUrl: 'partials/default-template-directive.tpl.html',\n\n      transclude: true,\n\n      replace: false,\n\n      controllerAs: 'defaultTemplate',\n\n      controller: function ($scope, $rootScope, AppService, $mdDialog) {\n\n        var self = this;\n\n        this.selected = []\n\n        this.page = 1\n\n        this.limit = 10\n\n        this.base = $scope.options.data.info.source\n\n        this.scrollToTop = () => {\n\n          $(\"#mainContent\")\n            .stop()\n            .animate({\n\n              scrollTop: 0\n\n            }, '800', 'swing');\n\n       }\n\n\n        //Get\n\n        this.$get = (page, limit) => {\n\n          self.scrollToTop()\n\n          AppService\n            .get({\n\n              page: page,\n              \n              url: self.base,\n              \n              limit: limit,\n\n              query: self.query || undefined\n\n            })\n\n            .then(success => {\n\n              self.rows = []\n\n              self.rows = success.data.results\n\n              self.total = success.data.info.total\n\n\n            })\n            .catch(err => {\n\n              console.log(err)\n\n            })\n\n        }\n\n\n        this.$get(self.page, self.limit)\n\n\n        //Show Form Edit/Create\n        \n        this.form = ($event, item, duplication = false) => {\n\n          self.dataToForm = {}\n\n          if (item && !duplication){\n\n            var options = {\n\n              array: self.rows,\n\n              condicion: { id: item.id }\n\n            }\n\n            var index = AppService.filter(options)\n\n            self.dataToForm = self.rows[index];\n\n            self.tempData = angular.copy(self.rows[index])\n\n          };\n\n          if (duplication){\n\n            self.dataToForm = angular.copy(item)\n\n            delete self.dataToForm.id\n\n            delete self.dataToForm.$hashKey\n\n          }\n\n          var dialog = {\n\n            scope: $scope,\n\n            targetEvent: $event\n\n          }\n\n          AppService\n            .showFormDialog(dialog)\n            .then( data => {\n\n\n             if (data){\n\n              if( item && angular.equals(angular.copy(item), self.tempData) && !duplication)\n                self.rows[index] = data\n\n              if ( !item || duplication)\n                self.rows.push(data)\n\n             }\n\n\n            })\n            .catch(err => {\n\n\n            })\n\n        }\n\n\n        //Delete\n        \n        this.delete = ($event, id) => {\n\n          var confirm = $mdDialog\n                          .confirm()\n                          .title('Confirmación')\n                          .content('¿Realmente deseas eliminar este item?')\n                          .ariaLabel('Delete Confirm')\n                          .ok('Confirmar')\n                          .cancel('Cancelar')\n                          .targetEvent($event)\n\n          $mdDialog\n            .show(confirm)\n            .then(() => {\n\n              return AppService\n                        .delete(self.base, id)\n\n            })\n\n            .then(response => {\n                  \n              var options = {\n\n                array: self.rows,\n\n                condicion: { id: response.data.id }\n\n              }\n\n              var index = AppService.filter(options)\n\n              self.rows.splice(index, 1)\n\n              $('.scroller').scrollTop($('.scroller').scrollTop + 1)\n\n            })\n            .catch(() => {\n\n            })\n\n        }\n\n        this.getSelected = data => {\n\n          console.log(self.selected)\n\n        }\n\n        this.keysToString = (keys, obj) => {\n\n          if (!keys.contains('>'))\n            return obj[keys]\n\n          else{\n\n            var keys = keys.split('>')\n\n            var temp = obj\n\n            for (var i = 0; i < keys.length; i++)\n              temp = temp[ keys[ i ] ]\n\n            return temp\n\n        }\n\n      }\n\n        \n\n        //On filtered\n        \n        $rootScope.$on('filtered', ($event, data) => {\n\n          self.scrollToTop()\n\n          self.rows = data.results\n\n          self.total = data.info.total\n\n          self.page = data.info.start + 1\n\n          self.limit = data.info.limit\n\n          self.query = data.query\n\n\n        })\n\n        //On Deferred\n        \n        $rootScope.$on('deferred', ($event, data) => {\n          self.deferred = data.promise\n        })\n\n\n\n      },\n      link: function (scope, element, attrs, ctrl, transclude) {\n        /* jshint unused:false */\n        /* eslint \"no-unused-vars\": [2, {\"args\": \"none\"}] */\n      }\n\n    };\n\n  }\n\n}());\n"],"sourceRoot":"/source/"}