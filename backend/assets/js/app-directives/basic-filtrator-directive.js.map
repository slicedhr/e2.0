{"version":3,"sources":["app-directives/basic-filtrator-directive.js"],"names":[],"mappings":";;AAAA,AAAC,CAAA,YAAY;AACX,cAAY,CAAC;;;;;;;;;;;;;;;;;;AAkBb,SAAO,CACJ,MAAM,CAAC,YAAY,CAAC,CACpB,SAAS,CAAC,gBAAgB,EAAE,cAAc,CAAC,CAAC;;AAE/C,WAAS,cAAc,GAAG;AACxB,WAAO;AACL,cAAQ,EAAE,IAAI;AACd,WAAK,EAAE;;AAEL,aAAK,EAAE,GAAG;;AAEV,aAAK,EAAE,GAAG;;OAEX;AACD,iBAAW,EAAE,6CAA6C;AAC1D,aAAO,EAAE,KAAK;AACd,kBAAY,EAAE,gBAAgB;AAC9B,gBAAU,EAAE,oBAAU,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE;;AAEpD,YAAI,IAAI,GAAG,IAAI,CAAC;;AAEhB,YAAI,CAAC,SAAS,GAAG,KAAK,CAAA;;AAEtB,YAAI,CAAC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,OAAO,CAAA;;AAEpC,YAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAA;;AAE/C,YAAI,CAAC,IAAI,GAAG,QAAQ,CAAA;;AAEpB,YAAI,CAAC,YAAY,GAAG,YAAM;;AAExB,cAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,SAAS,CAAA;;AAEhC,cAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,GAAG,QAAQ,GAAG,QAAQ,CAAA;SAEjD,CAAA;AACD,eAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;;AAEjB,YAAI,CAAC,MAAM,GAAG,YAAM;;AAElB,cAAI,CAAC,KAAK,GAAG,EAAE,CAAA;;AAEf,cAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG;;AAE1B,sBAAU,EAAG,IAAI,CAAC,WAAW;;WAE9B,CAAA;;AAED,iBAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;;AAEvB,cAAI,CAAC,KAAK,GAAG,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;;AAElD,cAAI,MAAM,GAAG;;AAEX,eAAG,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM;;AAEzC,iBAAK,EAAE,IAAI,CAAC,KAAK;;AAEjB,gBAAI,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI;;AAEtC,iBAAK,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,KAAK;;WAEzC,CAAA;;AAED,oBAAU,CACP,GAAG,CAAC,MAAM,CAAC,CACX,IAAI,CAAE,UAAA,OAAO,EAAI;;AAEhB,gBAAI,IAAI,GAAG,OAAO,CAAC,IAAI,CAAA;;AAEvB,gBAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAA;;AAEvB,sBAAU,CAAC,UAAU,CAAC,UAAU,EAAE,IAAI,CAAC,CAAA;WAExC,CAAC,CAAA;SAEL,CAAA;OAIF;AACD,UAAI,EAAE,cAAU,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE;;;;OAItC;KACF,CAAC;GACH;CACF,CAAA,EAAE,CAAE","file":"app-directives/basic-filtrator-directive.js","sourcesContent":["(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name home.directive:basicFiltrator\n   * @restrict EA\n   * @element\n   *\n   * @description\n   *\n   * @example\n     <example module=\"enterprise\">\n       <file name=\"index.html\">\n        <basic-filtrator></basic-filtrator>\n       </file>\n     </example>\n   *\n   */\n  angular\n    .module('enterprise')\n    .directive('basicFiltrator', basicFiltrator);\n\n  function basicFiltrator() {\n    return {\n      restrict: 'EA',\n      scope: {\n\n        title: '@',\n\n        model: '=',\n\n      },\n      templateUrl: 'partials/basic-filtrator-directive.tpl.html',\n      replace: false,\n      controllerAs: 'basicFiltrator',\n      controller: function ($scope, $rootScope, AppService) {\n\n        var self = this;\n\n        this.showInput = false\n\n        this.parent = $scope.$parent.$parent\n\n        this.columns = self.parent.options.data.columns\n\n        this.icon = 'search'\n\n        this.toggleSearch = () => {\n\n          self.showInput = !self.showInput\n\n          self.icon = self.showInput ? 'cancel' : 'search'\n\n        }\n        console.log(self)\n\n        this.search = () => {\n\n          self.query = {}\n\n          self.query[self.searchBy] = {\n\n            \"contains\" : self.searchvalue\n\n          }\n\n          console.log(self.query)\n\n          self.query = 'where=' + JSON.stringify(self.query)\n\n          var config = {\n\n            url: self.parent.options.data.info.source,\n\n            query: self.query,\n\n            page: self.parent.defaultTemplate.page,\n\n            limit: self.parent.defaultTemplate.limit\n\n          }\n\n          AppService\n            .get(config)\n            .then( success => {\n\n              var data = success.data\n\n              data.query = self.query\n\n              $rootScope.$broadcast('filtered', data)\n\n            })\n\n        }\n\n      \n\n      },\n      link: function (scope, element, attrs) {\n        /* jshint unused:false */\n        /* eslint \"no-unused-vars\": [2, {\"args\": \"none\"}] */\n        // console.log(scope)\n      }\n    };\n  }\n}());\n"],"sourceRoot":"/source/"}