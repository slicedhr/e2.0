{"version":3,"sources":["partials/default-template-directive.js"],"names":[],"mappings":"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","file":"partials/default-template-directive.js","sourcesContent":["(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name enterprise.directive:defaultTemplate\n   * @restrict EA\n   * @element\n   *\n   * @description\n   *\n   * @example\n     <example module=\"enterprise\">\n       <file name=\"index.html\">\n        <default-template></default-template>\n       </file>\n     </example>\n   *\n   */\n  angular\n    .module('enterprise')\n    .directive('defaultTemplate', defaultTemplate);\n\n  function defaultTemplate() {\n    return {\n\n      restrict: 'EA',\n\n      scope: {\n\n        columns: '=',\n\n        source: '@',\n\n        design: '@',\n\n        template: '@',\n\n        title: '@',\n\n        animation: '@',\n\n        showSelectable: '='\n\n      },\n\n      templateUrl: 'partials/default-template-directive.tpl.html',\n\n      transclude: true,\n\n      replace: false,\n\n      controllerAs: 'defaultTemplate',\n\n      controller: function ($scope, $rootScope, AppService, $mdDialog) {\n\n        var self = this;\n\n        this.selected = []\n\n        this.page = 1\n\n        this.limit = 10\n\n        this.base = $scope.source\n\n\n        //Get\n\n        this.$get = (page, limit) => {\n\n          AppService\n            .get({\n\n              page: page,\n              \n              url: self.base,\n              \n              limit: limit\n\n            })\n\n            .then(success => {\n\n              console.log(success)\n\n              self.rows = []\n              \n              self.rows = success.data.results\n\n              self.total = success.data.info.total\n\n            })\n            .catch(err => {\n\n              console.log(err)\n\n            })\n\n        }\n\n\n        this.$get(self.page, self.limit)\n\n\n        //Show Form Edit/Create\n        \n        this.form = ($event, item) => {\n\n          self.dataToForm = {}\n\n          if (item){\n\n            var options = {\n\n              array: self.rows,\n\n              condicion: { id: item.id }\n\n            }\n\n            var index = AppService.filter(options)\n\n            self.dataToForm = self.rows[index];\n\n            self.tempData = angular.copy(self.rows[index])\n\n          };\n\n          var dialog = {\n\n            template: this.base+'/partials/form-dialog.tlp.html',\n\n            scope: $scope,\n\n            targetEvent: $event\n\n          }\n\n          AppService\n            .showFormDialog(dialog)\n            .then(data => {\n\n              if (!item)\n                self.rows.push(data)\n\n            })\n            .catch(err => {\n\n              if( item && !angular.equals(angular.copy(item), self.tempData)) \n                self.rows[index] = self.tempData\n\n            })\n\n        }\n\n\n        //Delete\n        \n        this.delete = (id, $event) => {\n\n          var confirm = $mdDialog\n                          .confirm()\n                          .title('Confirmación')\n                          .content('¿Realmente deseas eliminar este item?')\n                          .ariaLabel('Delete Confirm')\n                          .ok('Confirmar')\n                          .cancel('Cancelar')\n                          .targetEvent($event)\n\n          $mdDialog\n            .show(confirm)\n            .then(() => {\n\n              return AppService\n                        .delete(self.base, id)\n\n            })\n\n            .then(response => {\n                  \n              var options = {\n\n                array: self.rows,\n\n                condicion: { id: response.data.id }\n\n              }\n\n              var index = AppService.filter(options)\n\n              self.rows.splice(index, 1)\n\n            })\n            .catch(() => {\n\n            })\n\n        }\n\n        this.getSelected = data => {\n          console.log(self.selected)\n        }\n\n        //On filtered\n        \n        $rootScope.$on('filtered', ($event, data) => {\n\n          self.rows = data.results\n\n          self.total = data.info.total\n\n          self.page = data.info.start + 1\n\n          self.limit = data.info.limit\n\n        })\n\n      },\n      link: function (scope, element, attrs, ctrl, transclude) {\n        /* jshint unused:false */\n        /* eslint \"no-unused-vars\": [2, {\"args\": \"none\"}] */\n      }\n    };\n  }\n}());\n"],"sourceRoot":"/source/"}