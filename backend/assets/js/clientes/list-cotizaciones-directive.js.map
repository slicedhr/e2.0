{"version":3,"sources":["clientes/list-cotizaciones-directive.js"],"names":[],"mappings":"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","file":"clientes/list-cotizaciones-directive.js","sourcesContent":["(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name clientes.directive:listCotizaciones\n   * @restrict EA\n   * @element\n   *\n   * @description\n   *\n   * @example\n     <example module=\"clientes\">\n       <file name=\"index.html\">\n        <list-cotizaciones></list-cotizaciones>\n       </file>\n     </example>\n   *\n   */\n  angular\n    .module('clientes')\n    .directive('listCotizaciones', listCotizaciones);\n\n  function listCotizaciones() {\n    return {\n      restrict: 'EA',\n      scope: {\n        cotizaciones: '='\n      },\n      templateUrl: 'clientes/list-cotizaciones-directive.tpl.html',\n      replace: false,\n      controllerAs: 'listCotizaciones',\n      controller: function ($scope, $filter, $mdDialog) {\n\n        var vm = this;\n\n        vm.name = 'listCotizaciones';\n\n        vm.sumar = (which = 'all') => {\n\n          var filtered;\n\n          var suma = 0;\n\n          switch (which) {\n            case 'all':\n              filtered = $scope.cotizaciones; \n              break;\n            case 'vendidos':\n              filtered = $filter('filter')($scope.cotizaciones, { vendido: true });\n              break;\n            case 'novendidos':\n              filtered = $filter('filter')($scope.cotizaciones, { vendido: false });\n              break;\n          }\n\n          if (filtered.length)\n\n            filtered.forEach( function(element, index) {\n\n              for (var i = 0; i < element.detalle_total.length; i++)\n                suma += ((((element.detalle_total[i].precio*element.detalle_total[i].utilidad_bruta)/100)+element.detalle_total[i].precio)*element.detalle_total[i].cantidad) - ((((((element.detalle_total[i].precio*element.detalle_total[i].utilidad_bruta)/100)+element.detalle_total[i].precio)*element.detalle_total[i].cantidad)*element.detalle_total[i].descuento)/100) + (((((((element.detalle_total[i].precio*element.detalle_total[i].utilidad_bruta)/100)+element.detalle_total[i].precio)*element.detalle_total[i].cantidad) - ((((((element.detalle_total[i].precio*element.detalle_total[i].utilidad_bruta)/100)+element.detalle_total[i].precio)*element.detalle_total[i].cantidad)*element.detalle_total[i].descuento)/100))*element.detalle_total[i].iva)/100)\n\n            });\n         \n          return suma;\n\n        }\n\n        vm.sumaTodos = vm.sumar();\n        vm.sumaVendidos = vm.sumar('vendidos');\n        vm.sumaNoVendidos = vm.sumar('novendidos');\n\n        vm.ver = (row, $event) => {\n\n          $scope.data = row\n\n          $mdDialog.show({\n            \n              controller: DialogController,\n\n              templateUrl: 'clientes/ver-cotizacion.tpl.html',\n\n              clickOutsideToClose: true,\n\n              escapeToClose: true,\n\n              scope: $scope,\n\n              preserveScope: true,\n\n              parent: angular.element(document.body),\n\n              disableParentScroll: true,\n\n              targetEvent: $event\n\n          })\n          .then(function(data) {\n            \n          }, function() {\n            \n          });\n\n\n          function DialogController($scope, AppService){\n\n            let idcotizacion = $scope.data.id;\n\n\n            let config = {\n\n              method: 'GET',\n\n              url: AppService.setPrefix(`detallecotizacion?cotizacion=${idcotizacion}&populate=producto`)\n\n            }\n\n            $scope.sumar = arr => {\n              let suma = 0;\n        \n              for (let i = 0; i < arr.length; i++)\n                suma += ((((arr[i].precio*arr[i].utilidad_bruta)/100)+arr[i].precio)*arr[i].cantidad) - ((((((arr[i].precio*arr[i].utilidad_bruta)/100)+arr[i].precio)*arr[i].cantidad)*arr[i].descuento)/100) + (((((((arr[i].precio*arr[i].utilidad_bruta)/100)+arr[i].precio)*arr[i].cantidad) - ((((((arr[i].precio*arr[i].utilidad_bruta)/100)+arr[i].precio)*arr[i].cantidad)*arr[i].descuento)/100))*arr[i].iva)/100);\n              \n              return suma;\n\n            }\n\n            AppService\n              .http(config)\n              .then(response => {\n\n                $scope.data.detalle_total = response.data.results;\n                 \n                console.log($scope)\n              })\n\n          }\n\n        }\n      \n      },\n      link: function (scope, element, attrs) {\n        /* jshint unused:false */\n        /* eslint \"no-unused-vars\": [2, {\"args\": \"none\"}] */\n      }\n    };\n  }\n}());\n"],"sourceRoot":"/source/"}